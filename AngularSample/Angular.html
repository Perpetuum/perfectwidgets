<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="Demo">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>PerfectWidgets Angular.js demo</title>
    <link href="Styles/Base.css" rel="stylesheet" />
    <script type="text/javascript">
        function showTab(headerId, tabId) {
            var headers = document.getElementById("tabLine").children;
            for (var i = 0; i < headers.length; i++) {
                headers[i].classList.remove("active");
            }
            var contents = document.getElementById("tabContent").children;
            for (var i = 0; i < contents.length; i++) {
                contents[i].classList.remove("hidden");
                contents[i].classList.add("hidden");
            }
            document.getElementById(headerId).classList.add("active");
            document.getElementById(tabId).classList.remove("hidden");
        }
    </script>
    <!--ScriptSharp library-->
    <script src="Scripts/mscorlib.js" type="text/javascript"></script>
    <!--Perfectwidgets library-->
    <script src="Scripts/PerfectWidgets.js" type="text/javascript"></script>
    <script src="Scripts/widgetJson.js" type="text/javascript"></script>
    <script src="Scripts/angular.js"></script>
    <script src="Scripts/app.js"></script>
</head>
<body>
    <div class="background">
        <div class="content"></div>
    </div>
    <div class="header">
        <div class="content">
            <a href="http://perfectwidgets.com/" class="topStripe">POWERFUL HTML5 (JAVASCRIPT) GAUGES FOR ANGULAR.JS</a>
        </div>
    </div>
    <div class="content">
        <h1 class="page-title">NOW YOU CAN USE POWER OF PERFECT WIDGETS WITH... COMFORT!</h1>
        <div class="sampleBlock">
            
            <div class="leftColumn">
                <div class="liveSample" ng-controller="AppController">
                    <div id="root" style="width:270px; height: 270px;"></div>
                    <div class="controls">
                        <div class="controlsColumn">
                            <input type="text" ng-model="model.Slider1Value" value="20" />
                            <span >Slider1 value</span><br />
                            <button ng-click="startAnimation()">Start animation</button>
                        </div>
                        <div class="controlsColumn">
                            <input type="text" ng-model="model.Slider2Value" value="20" />
                            <span >Slider2 value</span><br />
                            <button ng-click="stopAnimation()">Stop animation</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="rightColumn">
                    <div class="tabLine" id="tabLine">
                        <a href="#" id="description_header" class="tabHeader active" onclick="showTab('description_header','description')">Description</a>
                        <a href="#" id="index.html_header" class="tabHeader" onclick="showTab('index.html_header','index.html')">index.html</a>
                        <a href="#" id="app.js_header" class="tabHeader" onclick="showTab('app.js_header','app.js')">app.js</a>
                    </div>
                    <div id="tabContent">
                        <div class="codeBlock hidden" id="index.html">
                            <pre style="margin: 0; line-height: 125%">
<span class="keyword">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
&lt;html xmlns=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span> ng-app=<span class="string">&quot;Demo&quot;</span>&gt;
&lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=Edge&quot;</span> /&gt;
    <span class="remark">&lt;!--ScriptSharp library--&gt;</span>
    &lt;script src=<span class="string">&quot;Scripts/mscorlib.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;&lt;/script&gt;
    <span class="remark">&lt;!--Perfectwidgets library--&gt;</span>
    &lt;script src=<span class="string">&quot;Scripts/PerfectWidgets.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;&lt;/script&gt;
    <span class="remark">&lt;!--Widget JSON--&gt;</span>
    &lt;script src=<span class="string">&quot;Scripts/widgetJson.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;&lt;/script&gt;
    <span class="remark">&lt;!--Angular--&gt;</span>
    &lt;script src=<span class="string">&quot;Scripts/angular.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;&lt;/script&gt;
    <span class="remark">&lt;!--Application logic--&gt;</span>
    &lt;script src=<span class="string">&quot;Scripts/app.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body ng-controller=<span class="string">&quot;AppController&quot;</span>&gt;
    <span class="remark">&lt;!--widget will be in the div below--&gt;</span>
    &lt;div id=<span class="string">&quot;root&quot;</span>&gt;
    &lt;/div&gt;
    &lt;div&gt;
        Slider1 Value:&lt;input type=<span class="string">&quot;text&quot;</span> ng-model=<span class="string">&quot;model.Slider1Value&quot;</span> id=<span class="string">&quot;valbox&quot;</span> value=<span class="string">&quot;20&quot;</span>/&gt;&lt;/br&gt;
        Slider2 Value:&lt;input type=<span class="string">&quot;text&quot;</span> ng-model=<span class="string">&quot;model.Slider2Value&quot;</span> id=<span class="string">&quot;valbox&quot;</span> value=<span class="string">&quot;10&quot;</span>/&gt;&lt;/br&gt;
        &lt;button ng-click=<span class="string">&quot;startAnimation()&quot;</span>&gt;Start animation&lt;/button&gt;
        &lt;button ng-click=<span class="string">&quot;stopAnimation()&quot;</span>&gt;Stop animation&lt;/button&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
                        </pre>
                        </div>
                        <div id="app.js" class="codeBlock hidden">
                            <pre style="margin:0; line-height:125%;">
<span class="keyword">var</span> app = angular.module( <span class="string">&quot;Demo&quot;</span>, [] );
app.controller(
    <span class="string">&quot;AppController&quot;</span>,
    <span class="keyword">function</span>( $scope, $interpolate ) {
        $scope.model = {
            Slider1Value: 10,
            Slider2Value: 20,
        };
        $scope.startAnimation = <span class="keyword">function</span>() {
            $scope.stopAnimation();
            $scope.animationTimeoutId = setTimeout($scope.animate, 2000);
        };
        $scope.stopAnimation = <span class="keyword">function</span>() {
            clearTimeout($scope.animationTimeoutId);
        };
        $scope.animationTimeoutId = 0;
        $scope.animate = <span class="keyword">function</span>() {
            $scope.model.Slider1Value = Math.floor((Math.random() * 40) + 1);
            $scope.model.Slider2Value = Math.floor((Math.random() * 40) + 1);
            $scope.$apply();
            $scope.animationTimeoutId = setTimeout($scope.animate, 2000);
        };
        $scope.startAnimation();
    });
<span class="remark">// Binding helper</span>
<span class="keyword">function</span> WidgetBindingHelper(rootId, widget){
    <span class="keyword">var</span> _scope = angular.element(document.getElementById(rootId)).scope();
    <span class="keyword">var</span> _widget = widget;
    <span class="keyword">this</span>.BindSliderValue = <span class="keyword">function</span>(sliderName, getFunction, setFunction){
        <span class="keyword">var</span> slider = _widget.getByName(sliderName);
        <span class="keyword">var</span> disableUpdates = <span class="keyword">false</span>; 
        <span class="remark">// widget -&gt; model</span>
        slider.setValue(getFunction(_scope), <span class="keyword">false</span>);
        slider.addValueChangedHandler(<span class="keyword">function</span>(s, e){   
            <span class="keyword">if</span>(disableUpdates)<span class="keyword">return</span>;
            applySliderChanges(setFunction, slider);    
        });
        <span class="remark">// model -&gt; widget</span>
        _scope.$watch(
            <span class="keyword">function</span>( $scope ) {
                <span class="keyword">return</span> getFunction($scope);
            },
            <span class="keyword">function</span>( newValue ) {
                disableUpdates = <span class="keyword">true</span>;
                slider.setValue(newValue);
                disableUpdates = <span class="keyword">false</span>;
            }
        );
    }
    <span class="keyword">this</span>.BindReadonlyValue = <span class="keyword">function</span>(name, property, getFunction, setFunction){
        <span class="keyword">var</span> object = _widget.getByName(name);
        <span class="remark">// model -&gt; widget</span>
        _scope.$watch(
            <span class="keyword">function</span>( $scope ) {
                <span class="keyword">return</span> getFunction($scope);
            },
            <span class="keyword">function</span>( newValue ) {
                setElementProperty(object, property, getFunction(_scope));
            }
        );
        setElementProperty(object, property, getFunction(_scope));
        _scope.$apply();
    }
    
    <span class="keyword">function</span> setElementProperty(object, property, value){
        object[<span class="string">&quot;set&quot;</span>+property].apply(object, [value]);
        object.setNeedRepaint(<span class="keyword">true</span>); 
        object.refreshElement();
    }
    <span class="keyword">function</span> getElementProperty(object, property){
        <span class="keyword">return</span> object[<span class="string">&quot;get&quot;</span>+property].apply(object);
    }
    <span class="keyword">function</span> applySliderChanges(setFunction, slider){
        setFunction(_scope, slider.getValue()); 
        _scope.$apply();
    }
}
window.onload = <span class="keyword">function</span> () {
    <span class="remark">//widget model is stored in Scripts/widgetJson.js and is avaliable through WidgetJson.Widget1</span>
    <span class="remark">//creating widget</span>
    widget = <span class="keyword">new</span> PerfectWidgets.Widget(<span class="string">&quot;root&quot;</span>, WidgetJson.Widget1);
    <span class="remark">//setting binding</span>
    <span class="keyword">var</span> binder = <span class="keyword">new</span> WidgetBindingHelper(<span class="string">&#39;root&#39;</span>, widget);
    
    binder.BindSliderValue(<span class="string">&quot;Slider1&quot;</span>, <span class="keyword">function</span>(scope){ <span class="keyword">return</span> scope.model.Slider1Value }, <span class="keyword">function</span>(scope, value){ scope.model.Slider1Value = value });
    binder.BindSliderValue(<span class="string">&quot;Slider2&quot;</span>, <span class="keyword">function</span>(scope){ <span class="keyword">return</span> scope.model.Slider2Value }, <span class="keyword">function</span>(scope, value){ scope.model.Slider2Value = value });
}
</pre>
                        </div>
                        <div id="description" class="codeBlock description">
                            <img class="icon" src="Img/angular.jpg" width="236" height="98" />
                            <div class="text" style="margin-top: 24px;">
                                Angular.js is an open source JavaScript framework providing a set of convenient tools for the creation of single-page web applications. This framework uses MVC ideology, which allows developers to move a part of web application logic to the client side. It helps to reduce server and communication channel load.Angular.js uses HTML with additional tags and attributes as Views. These tags and attributes make it possible to set UI elements bindings to data declaratively. The framework is responsible for further interaction of the user interface and a model; it secures synchronization in one-way and two-way directions.<br />
                                <br />
                                The use of Perfect Widgets together with this framework doesn’t lead to any conflicts and doesn’t cause any difficulties. There may appear some questions on how to bind model data to the gauge indication objects. This sample demonstrates one of the solutions of this task and provides an assistant class. This class is able to bind model data both to interactive parameters of a gauge (slider value) and to passive properties (scale range).
                            </div>
                        </div>
                    </div>
                <div class="textCenterer">
                    <a href="Downloads/AngularSample.zip" class="downloadSampleButton"></a>
                </div>
            </div>
        </div>
        <div style="clear:both"></div>
        <div class="tutorialBlock">
            <div class="tutorialHeader">
                <h1>HOW-TO SECTION: BINDING SLIDER TO MODEL</h1>
            </div>
            <div class="fullStep">
                <p>
                    To bind slider to a model you should take care of two points:
                </p>
            </div>
            <div class="heightEqualizer">
                <div class="leftColumn">
                    <div class="tallStep">
                        <div class="tallStepContent">
                            <h1>1</h1>
                            <p>Add a handler to update model value:</p>
                            <div class="smallCodeblock">
                                <pre>
slider.addValueChangedHandler(
  <span class="keyword">function</span>(s, e){
    scope.sliderValue = slider.getValue();
    scope.$apply();
});
</pre>
                            </div>
                            <h1>2</h1>
                            <p>And add a listener to update slider:</p>
                            <div class="smallCodeblock" style="margin-bottom:0px;">
                                <pre>
scope.$watch(<span class="string">'sliderValue'</span>,
  <span class="keyword">function</span>(newValue, oldValue) {
  <span class="keyword">if</span> (newValue!=oldValue) {
    slider.setValue(newValue);
  }
});
</pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="rightColumn">
                    <div class="tallStep">
                        <div class="tallStepContent">
                            <p>Or you may use WidgetBindingHelper class from sample:</p>
                            <div class="smallCodeblock" style="margin-bottom:0px;">
                                <pre>
<span class="keyword">var</span> binder = <span class="keyword">new</span> WidgetBindingHelper(
  <span class="string">"root"</span>,    <span class="remark">//Widget's div id</span>
  widget    <span class="remark">//Widget object</span>
  );

binder.BindSliderValue(
  <span class="string">"Slider1"</span>,    <span class="remark">//Slider name</span>
  <span class="keyword">function</span>(scope){
  <span class="remark">//Model value getter</span>
    <span class="keyword">return</span> scope.model.Slider1Value
  },
  <span class="keyword">function</span>(scope, value){ 
  <span class="remark">//Model value setter</span>
    scope.model.Slider1Value = value 
  }
);</pre>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div style="clear:both;"></div>
            </div>
            <div class="tutorialHeader">
                <a href="http://perfectwidgets.com/order/download"><h1>DOWNLOAD PERFECT WIDGETS!</h1></a>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="content">
            <p>&copy; 2002 - <span id="nowYear">2013</span> Perpetuum Software LLC The company of Enterra Inc. <a href="#">Terms Of Use</a> <a href="#">PrivacyPolicy</a> <a href="#">Site Map</a> </p>
        </div>
    </div>
</body>
</html>